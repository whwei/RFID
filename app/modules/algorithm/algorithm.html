
<div class="row content-nav">
    <div>
        <button ng-class="tabs.simulate" ng-click="switchTab('simulate')">算法模拟</button>
        <button ng-class="tabs.result" ng-click="switchTab('result')">统计结果</button>
    </div>
</div>
<div class="animate-switch-container panels">
    <div class="simulate animate-switch" ng-class="panels.simulate">
        <div class="goal-setting">
            <h3>优化目标</h3>
            <div class="col-container">
                <div ng-repeat="mode in modes">
                    <label for="{{ mode.name }}">
                        <input type="radio" id="{{ mode.name }}" ng-checked="mode.default" name="runMode" ng-model="$parent.runMode" value="{{ mode.name }}">
                        {{ mode.desc }}
                    </label>
                    <div class="rq">
                        <span ng-repeat="rq in mode.requirements">
                            <label for="{{ rq.name }}">{{ rq.desc }}</label>
                            <input type="text" id="{{ rq.name }}" ng-model="rq.value" />
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="param-setting">
            <h3>模拟参数</h3>
            <div class="col-container">
                <div class="options" ng-repeat="option in options">
                    <label for="{{option.name}}">{{option.desc}}</label>
                    <input ng-disabled="option.disabled" type="text" id="{{option.name}}" ng-model="option.value" />
                </div>
            </div>
        </div>
        <div class="operations">
            <button class="btn-primary" ng-click="simulate()">模拟</button>
        </div>
        <div class="calculating-mask" ng-class="calculating">
            <div>
                <div>
                    <img src="images/loader.gif" alt="loading"/>
                </div>
                计算中...
            </div>
        </div>
    </div>

    <div class="statistic animate-switch" ng-class="panels.result">
        <div class="no-result" ng-show="cleanHistory">暂无数据</div>
        <div class="history-selector" ng-hide="cleanHistory">
            历史记录：<select ng-model="currentRecord" ng-options="record.runData.date | date: 'yyyy/M/d H:m:s' for record in history"></select>
        </div>
        <div class="result" ng-hide="cleanHistory">
            <div class="best-solution">
                <div class="bubble-charts">
                    <div id="bubble-chart-origin" class="chart"></div>
                    <div id="bubble-chart-result" class="chart"></div>
                </div>

                <div class="result-list">
                    <div class="statistic">
                        <h4>模拟结果统计</h4>
                        <div class="table-container">
                            <table>
                                <tr><th>指标</th><th>数值</th></tr>
                                <tr><td>模拟日期</td><td>{{ result.runData.date | date : 'yyyy/M/d H:m:s' }}</td></tr>
                                <tr><td>运行次数</td><td>{{ result.runData.options.rpt.value }}</td></tr>
                                <tr><td>平均读写器个数</td><td>{{ result.runData.avgRn | number }}</td></tr>
                                <tr><td>平均运行时间（ms）</td><td>{{ result.runData.avgTime | number }}</td></tr>
                                <tr><td>平均适应度</td><td>{{ result.runData.avgFitness | number }}</td></tr>
                                <tr><td>得到最优解迭代次数</td><td>{{ (result.runData.avgIte + 1).toFixed(0) }}</td></tr>
                                <tr><td>均方差</td><td>{{ result.runData.mse.toExponential(3) }}</td></tr>
                                <tr><td>最高适应度</td><td>{{ result.runData.readerStatistic.fitness | number }}</td></tr>
                            </table>
                        </div>
                    </div>
                    <div class="readers">
                        <h4>最优解</h4>
                        <div class="table-container">
                            <table>
                                <tr><th>指标</th><th>数值</th><th>权重</th></tr>
                                <tr ng-repeat="r in cfgReaders.statistic.results">
                                    <td>{{ r.desc }}</td>
                                    <td>{{ r.value | number }}</td>
                                    <td>{{ r.weight }}</td>
                                </tr>
                                <tr><td>适应度</td><td>{{ cfgReaders.statistic.fitness | number }}</td><td></td></tr>
                            </table>
                        </div>
                        <h4>读写器坐标</h4>
                        <div class="table-container">
                            <table>
                                <tr><th>No.</th><th>x</th><th>y</th></tr>
                                <tr ng-repeat="r in cfgReaders">
                                    <td>{{ $index+1 }}</td>
                                    <td><input type="text" value="{{ r.x | number }}" ng-model="r.x" /></td>
                                    <td><input type="text" value="{{ r.y | number }}" ng-model="r.y" /></td>
                                </tr>
                            </table>
                        </div>
                        <div class="operations">
                            <button class="btn-primary update-statistic" ng-click="updateStatistic()">更新</button>
                        </div>
                    </div>
                </div>

            </div>
            <div class="statistic-charts">
                <!--highest fitness-->
                <div id="highest" class="chart"></div>
            </div>
        </div>


    </div>
</div>
